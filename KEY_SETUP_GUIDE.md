# üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª—é—á–µ–π –¥–æ—Å—Ç—É–ø–∞ DigitalOcean Spaces

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: Access Denied

–í–∞—à–∏ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞ –Ω–µ –∏–º–µ—é—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å DigitalOcean Spaces.

## üîß –†–µ—à–µ–Ω–∏–µ: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ –∫–ª—é—á–∏

### 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è DigitalOcean

1. **–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç**: https://cloud.digitalocean.com/
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª API**: https://cloud.digitalocean.com/account/api/tokens

### 2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á –¥–ª—è Spaces

1. **–ù–∞–∂–º–∏—Ç–µ "Generate New Key"**
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–ª—é—á**:
   - **–ò–º—è**: `arcast-spaces-key`
   - **–¢–∏–ø**: `Spaces access keys`
   - **–û–±–ª–∞—Å—Ç—å**: –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à Space –∏–ª–∏ "All Spaces"
   - **–†–∞–∑—Ä–µ—à–µ–Ω–∏—è**:
     - ‚úÖ `Read`
     - ‚úÖ `Write`
     - ‚úÖ `Delete` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏**:
   - **Access Key** (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `DO...`)
   - **Secret Key** (–¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)

### 3. –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª .env.local

–ó–∞–º–µ–Ω–∏—Ç–µ —Ç–µ–∫—É—â–∏–µ –∫–ª—é—á–∏ –Ω–∞ –Ω–æ–≤—ã–µ:

```env
AWS_REGION="nyc3"
AWS_ENDPOINT="https://nyc3.digitaloceanspaces.com"
AWS_ACCESS_KEY_ID="–≤–∞—à-–Ω–æ–≤—ã–π-access-key"
AWS_SECRET_ACCESS_KEY="–≤–∞—à-–Ω–æ–≤—ã–π-secret-key"
AWS_S3_BUCKET_NAME="arcast-s3"
```

### 4. –°–æ–∑–¥–∞–π—Ç–µ Space (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω)

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Spaces**: https://cloud.digitalocean.com/spaces
2. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Space**:
   - **–ò–º—è**: `arcast-s3`
   - **–†–µ–≥–∏–æ–Ω**: `New York 3 (nyc3)`
   - **–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø**: ‚úÖ –í–∫–ª—é—á–µ–Ω–æ

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–ª—é—á–µ–π –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ Spaces
node scripts/list-spaces.js

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π Space
npm run test:s3
```

## üîç –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –ø—Ä–æ–≤–µ—Ä–∫–∏

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å AWS CLI, –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã:

```bash
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
aws --profile do-tor1 configure set aws_access_key_id –í–ê–®_ACCESS_KEY
aws --profile do-tor1 configure set aws_secret_access_key –í–ê–®_SECRET_KEY
aws --profile do-tor1 configure set region nyc3
aws --profile do-tor1 configure set endpoint_url https://nyc3.digitaloceanspaces.com

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Spaces
aws --profile do-tor1 s3 ls

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π Space
aws --profile do-tor1 s3 ls s3://arcast-s3
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–¢–∏–ø –∫–ª—é—á–∞**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–æ–∑–¥–∞–µ—Ç–µ –∏–º–µ–Ω–Ω–æ "Spaces access keys", –∞ –Ω–µ –æ–±—ã—á–Ω—ã–µ API —Ç–æ–∫–µ–Ω—ã
2. **–†–∞–∑—Ä–µ—à–µ–Ω–∏—è**: –ö–ª—é—á–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å
3. **–û–±–ª–∞—Å—Ç—å**: –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Space –∏–ª–∏ "All Spaces"
4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –•—Ä–∞–Ω–∏—Ç–µ –∫–ª—é—á–∏ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –Ω–µ –¥–µ–ª–∏—Ç–µ—Å—å –∏–º–∏

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∏–ø –∫–ª—é—á–∞**: –î–æ–ª–∂–µ–Ω –±—ã—Ç—å "Spaces access keys"
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è**: –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω—ã Read –∏ Write
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±–ª–∞—Å—Ç—å**: –î–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å –≤–∞—à Space
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–≥–∏–æ–Ω**: Space –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ä–µ–≥–∏–æ–Ω–µ nyc3

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ —Ä–µ—à–∞—é—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é DigitalOcean Spaces
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
